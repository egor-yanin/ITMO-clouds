# Лабораторная работа 2*

Написать плохой и хороший Docker Compose-файлы, описать, почему они таковыми являются, сделать так, чтобы контейнеры поднимались вместе, но не видели друг друга

## Плохой Docker Compose-файл: docker-compose-bad.yml

- 1 плохая практика: Указание тэга latest

  Как уже было упомянуто в основной части лаборатоной 2, latest версии образа лучше не выбирать, ведь тогда есть шанс, что при очередной пересборке образ соберется неправильно в силу изменений в версии,
  вызовет ошибки совместимости или тому подобные неприятности. Вообще так-то version не то чтобы обязательно прописывать судя по предупреждению "the attribute 'version'
  is obsolete, it will be ignored, please remove it to avoid potential confusion".

- 2 плохая практика: Секретная информация видима

  Пароли и другие сокральные знания нельзя вставлять в код напрямую, ведь это может привести не только к серьезным угрозам безопасноти данных, но и к конфликтам
  данных при использовании файла например разработкой и продакшеном

- 3 плохая практика: Работа от root

  Это нарушение так же связано с безопасностью - root пользователи имеют доступ к всем файлам системы, чего мы не имеем права выдавать посторонним

- 4 плохая практика: Все сервисы в одной сети

 По умолчанию контейнеры могут обращаться друг к другу по DNS-именам, что нарушает принцип минимизации доступов. Контейнеры необходимо изолировать в отдельные сети,
 что также повысит безопасность наших данных

## Хороший докер-файл: docker-compose-isolated.yml

Безопасноть данных не только от злоумышленников, но и от ошибок повышена засчет отнятия привелегий root рользователя, изоляции контейнеров друг от друга, 
использования стабильных проверенных версий образов и скрытия секретной информации

## Изоляция контейнеров:

Для изоляции контейнеров мы создаем для каждого отдельную сеть - будучи в одном networks они поднимаются вместе, но не имеют общего сетевого пространства
и не могут обращаться друг к другу. Это происходит потому что каждый мост (bridge) представляет собой отдельный виртуальный коммутатор, и контейнеры, 
подключённые к разным сетям, получают IP-адреса из разных подсетей и соответсвенно не имеют связи

## Проверка:

<img width="1875" height="738" alt="511496002-4dc1bfe8-a07b-42b2-9b1a-d4cbea8f0a08" src="https://github.com/user-attachments/assets/a28a6843-df89-4fd2-bb73-acaf34cef58d" />

При плохом Compose все запускается

<img width="1238" height="66" alt="Снимок экрана 2025-12-25 234315" src="https://github.com/user-attachments/assets/8708c83b-e137-470e-a788-3d40f3270bba" />

И при хорошем тоже 

<img width="1260" height="436" alt="Снимок экрана 2025-12-25 234637" src="https://github.com/user-attachments/assets/8a91a4fd-525f-498f-8cf4-cf88baafb8c2" />

<img width="1213" height="66" alt="Снимок экрана 2025-12-25 235031" src="https://github.com/user-attachments/assets/4d3427bc-6fd7-404e-aa89-05ec3e823c22" />

И изоляция работает

<img width="1117" height="103" alt="Снимок экрана 2025-12-25 235543" src="https://github.com/user-attachments/assets/374ea66c-abeb-43e4-9086-54981913dd43" />


# Вывод

Мы научились использовать Docker Compose в целом и главное можем делать это безопасно для наших данных.
